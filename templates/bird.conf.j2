{% macro print_config(config) %}
{% for element in config %}
{% if element is mapping %}
{% for key, value in element.items() %}
{{ key }} {
    {{ print_config(value) | indent }}
{%- if key.startswith("if ") or key == "else" %}
}
{% else %}{# if key.startswith("if ") or key == "else" #}
};
{% endif %}{# if key.startswith("if ") or key == "else" #}
{% endfor %}{# for key, value in element.items() #}
{% else %}{# if element is mapping #}
{{ element }};
{% endif %}{# if element is mapping #}
{% endfor %}{# element in config #}
{% endmacro -%}

# {{ ansible_managed }}

{{ print_config(bird_fact_config) }}
